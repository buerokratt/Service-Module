declaration:
  call: declare
  version: 0.1
  description: "Decription placeholder for 'DELETE-ENDPOINTS'"
  method: post
  accepts: json
  returns: json
  namespace: service
  allowlist:
    body:
      - field: name
        type: string
        description: "Body field 'name'"

extract_request_data:
  assign:
    name: ${incoming.body.name}

delete_get_endpoints:
  call: http.post
  args:
    url: "[#SERVICE_DMAPPER]/file-manager/delete-all-that-starts-with"
    body:
      path: "[#RUUTER_SERVICES_GET_PATH]/endpoints"
      keyword: "${name}-"
  result: results

delete_get_endpoints_configs:
  call: http.post
  args:
    url: "[#SERVICE_DMAPPER]/file-manager/delete-all-that-starts-with"
    body:
      path: "[#RUUTER_SERVICES_GET_PATH]/endpoints/configs"
      keyword: "${name}-"
  result: results

delete_get_endpoints_info:
  call: http.post
  args:
    url: "[#SERVICE_DMAPPER]/file-manager/delete-all-that-starts-with"
    body:
      path: "[#RUUTER_SERVICES_GET_PATH]/endpoints/info"
      keyword: "${name}-"
  result: results

delete_post_endpoints:
  call: http.post
  args:
    url: "[#SERVICE_DMAPPER]/file-manager/delete-all-that-starts-with"
    body:
      path: "[#RUUTER_SERVICES_POST_PATH]/endpoints"
      keyword: "${name}-"
  result: results

delete_post_endpoints_configs:
  call: http.post
  args:
    url: "[#SERVICE_DMAPPER]/file-manager/delete-all-that-starts-with"
    body:
      path: "[#RUUTER_SERVICES_POST_PATH]/endpoints/configs"
      keyword: "${name}-"
  result: results

delete_post_endpoints_info:
  call: http.post
  args:
    url: "[#SERVICE_DMAPPER]/file-manager/delete-all-that-starts-with"
    body:
      path: "[#RUUTER_SERVICES_POST_PATH]/endpoints/info"
      keyword: "${name}-"
  result: results

delete_get_common_endpoints:
  call: http.post
  args:
    url: "[#SERVICE_DMAPPER]/file-manager/delete-all-that-starts-with"
    body:
      path: "[#RUUTER_SERVICES_GET_PATH]/endpoints/common"
      keyword: "${name}-"
  result: results

delete_get_common_endpoints_configs:
  call: http.post
  args:
    url: "[#SERVICE_DMAPPER]/file-manager/delete-all-that-starts-with"
    body:
      path: "[#RUUTER_SERVICES_GET_PATH]/endpoints/configs/common"
      keyword: "${name}-"
  result: results

delete_get_common_endpoints_info:
  call: http.post
  args:
    url: "[#SERVICE_DMAPPER]/file-manager/delete-all-that-starts-with"
    body:
      path: "[#RUUTER_SERVICES_GET_PATH]/endpoints/info/common"
      keyword: "${name}-"
  result: results

delete_post_common_endpoints:
  call: http.post
  args:
    url: "[#SERVICE_DMAPPER]/file-manager/delete-all-that-starts-with"
    body:
      path: "[#RUUTER_SERVICES_POST_PATH]/endpoints/common"
      keyword: "${name}-"
  result: results

delete_post_common_endpoints_configs:
  call: http.post
  args:
    url: "[#SERVICE_DMAPPER]/file-manager/delete-all-that-starts-with"
    body:
      path: "[#RUUTER_SERVICES_POST_PATH]/endpoints/configs/common"
      keyword: "${name}-"
  result: results

delete_post_common_endpoints_info:
  call: http.post
  args:
    url: "[#SERVICE_DMAPPER]/file-manager/delete-all-that-starts-with"
    body:
      path: "[#RUUTER_SERVICES_POST_PATH]/endpoints/info/common"
      keyword: "${name}-"
  result: results

return_result:
  return: "Service Endpoints are deleted successfully"
